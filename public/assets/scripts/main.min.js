$(document).ready(function(){function t(t,e){if(0===t.length)return-1;for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function e(){u=[],$(".rc").each(function(t,e){u.push($(e).text())})}function n(){$("#list .item").on("click",function(){var n=$(this).text();-1===t(u,n)&&(u.push(n),$(r).before("<span class='rc'>"+n+"<i class='cross'></i></span>")),$("#main-input span:nth-last-child(2) > .cross").on("click",function(){$(this).parent("span").text();$(this).parent("span").remove(),e()})})}function s(t){return console.log(t),function(e){for(var s=0;s<e.length;s++)$(list).append(i(e[s],t));n()}}function a(t,e){t=t.toLowerCase();for(var n=["Автово","Адмиралтейская","Академическая","Балтийская","Бухарестская","Василеостровская","Владимирская"],s=[],a=0;a<n.length;a++)~n[a].toLowerCase().indexOf(t)&&s.push(n[a]);e(s)}function i(t,e){e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+e.split(" ").join("|")+")","gi");return'<li class="item" data-val="'+t+'">'+t.replace(n,"<b>$1</b>")+"</li>"}var o=document.getElementById("toggle-panel"),l=document.getElementById("panel"),c=document.getElementById("main-input"),r=(document.getElementById("list"),document.getElementById("txt")),h=$(".input-menu .arrow"),u=[];$(o).on("click",function(){$(this).toggleClass("active"),$(this).hasClass("active")?$(this).removeClass("arrow-right").addClass("arrow-left"):$(this).removeClass("arrow-left").addClass("arrow-right"),$(l).toggleClass("hidden")}),$(h).on("click",function(){$("#list").toggleClass("show"),$(this).hasClass("active")?$(this).removeClass("arrow-top").addClass("arrow-bottom"):$(this).removeClass("arrow-bottom").addClass("arrow-top"),$(this).toggleClass("active")}),$(l).on("click",function(t){!$(t.target).is(".input-menu *")&&$(h).hasClass("active")&&$(h).click(),console.log("ok, you clicked on "+$(t.target))}),$(".input-menu").on("click",function(){u.length>0?$(r).hasClass("ph-hidden")||$(r).addClass("ph-hidden"):$(r).hasClass("ph-hidden")&&$(r).removeClass("ph-hidden")}),$(c).click(function(){$(r).focus()}),$("#txt").on("input propertychange",function(){var t=$(this).val();$(list).children().remove(),t.length>=1&&(a(t,s(t)),$(h).hasClass("active")||$(h).click())})});