$(document).ready(function(){function t(t,e){if(0===t.length)return-1;for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function e(){d=[],$(".rc").each(function(t,e){d.push($(e).text())})}function n(){$("#list .item").on("click",function(){var n=$(this).text();-1===t(d,n)&&(d.push(n),$(c).before("<span class='rc'>"+n+"<i class='cross'></i></span>")),$("#main-input span:nth-last-child(2) > .cross").on("click",function(){$(this).parent("span").text();$(this).parent("span").remove(),e()})})}function a(t){return function(e){for(var a=0;a<e.length;a++)$(list).append(i(e[a],t));n()}}function s(t,e){t=t.toLowerCase();for(var n=["Автово","Адмиралтейская","Академическая","Балтийская","Бухарестская","Василеостровская","Владимирская","Старая деревня"],a=[],s=0;s<n.length;s++)~n[s].toLowerCase().indexOf(t)&&a.push(n[s]);e(a),u=a.length>0?!1:!0}function i(t,e){e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+e.split(" ").join("|")+")","gi");return'<li class="item" data-val="'+t+'">'+t.replace(n,"<b>$1</b>")+"</li>"}var l=document.getElementById("toggle-panel"),o=document.getElementById("panel"),r=document.getElementById("main-input"),c=(document.getElementById("list"),document.getElementById("txt")),h=$(".input-menu .arrow"),u=!1,d=[];$(l).on("click",function(){$(this).toggleClass("active"),$(this).hasClass("active")?$(this).removeClass("arrow-right").addClass("arrow-left"):$(this).removeClass("arrow-left").addClass("arrow-right"),$(o).toggleClass("hidden")}),$(h).on("click",function(){$("#list").toggleClass("show"),$(this).hasClass("active")?$(this).removeClass("arrow-top").addClass("arrow-bottom"):$(this).removeClass("arrow-bottom").addClass("arrow-top"),$(this).toggleClass("active")}),$(o).on("click",function(t){!$(t.target).is(".input-menu *")&&$(h).hasClass("active")&&$(h).click()}),$(".input-menu").on("click",function(){d.length>0?$(c).hasClass("ph-hidden")||$(c).addClass("ph-hidden"):$(c).hasClass("ph-hidden")&&$(c).removeClass("ph-hidden")}),$(r).click(function(){$(c).focus()}),$("#txt").on("input propertychange",function(){var t=$(this).val();$(list).children().remove(),t.length>=1?(s(t,a(t)),$(h).hasClass("active")||$(h).click()):$(h).hasClass("active")&&$(h).click()}),$(".panel-wrap").mCustomScrollbar({theme:"minimal-dark",autoHideScrollbar:!0}),$("#stop-list").mCustomScrollbar({theme:"minimal-dark",autoHideScrollbar:!0})});